let e=document.querySelector(".scrollToTopBtn"),t=document.documentElement;e.addEventListener("click",function(){t.scrollTo({top:0,behavior:"smooth"})}),document.addEventListener("scroll",function(){let s=t.scrollHeight-t.clientHeight;t.scrollTop/s>.4?e.classList.add("showBtn"):e.classList.remove("showBtn")});{let e,t;let s={map:(e,t,s,i,r)=>(e-t)*(r-i)/(s-t)+i,lerp:(e,t,s)=>(1-s)*e+s*t,getRandomFloat:(e,t)=>(Math.random()*(t-e)+e).toFixed(2)},i=document.body,r=()=>e={width:window.innerWidth,height:window.innerHeight};r(),window.addEventListener("resize",r);let n=()=>t=window.pageYOffset||document.documentElement.scrollTop;window.addEventListener("scroll",n);class o{constructor(i){this.DOM={el:i},this.DOM.image=this.DOM.el.querySelector(".content__item-img"),this.DOM.imageWrapper=this.DOM.image.parentNode,this.DOM.el.style.perspective="1000px",this.DOM.imageWrapper.style.transformOrigin="50% 100%",this.ry=s.getRandomFloat(-.5,.5),this.rz=s.getRandomFloat(-.5,.5),this.DOM.title=this.DOM.el.querySelector(".content__item-title"),this.DOM.title.style.transform="translate3d(0,0,200px)",this.renderedStyles={innerTranslationY:{previous:0,current:0,ease:.1,setValue:()=>{let i=parseInt(getComputedStyle(this.DOM.image).getPropertyValue("--overflow"),10),r=-1*i;return Math.max(Math.min(s.map(this.props.top-t,e.height,-1*this.props.height,r,i),i),r)}},itemRotation:{previous:0,current:0,ease:.1,toValue:Number(s.getRandomFloat(-70,-50)),setValue:()=>{let i=this.renderedStyles.itemRotation.toValue,r=-1*i;return Math.min(Math.max(s.map(this.props.top-t,1.5*e.height,-1*this.props.height,r,i),i),r)}}},this.getSize(),this.update(),this.observer=new IntersectionObserver(e=>{e.forEach(e=>this.isVisible=e.intersectionRatio>0)}),this.observer.observe(this.DOM.el),this.initEvents()}update(){for(let e in this.renderedStyles)this.renderedStyles[e].current=this.renderedStyles[e].previous=this.renderedStyles[e].setValue();this.layout()}getSize(){let e=this.DOM.el.getBoundingClientRect();this.props={height:e.height,top:t+e.top}}initEvents(){window.addEventListener("resize",()=>this.resize())}resize(){this.getSize(),this.update()}render(){for(let e in this.renderedStyles)this.renderedStyles[e].current=this.renderedStyles[e].setValue(),this.renderedStyles[e].previous=s.lerp(this.renderedStyles[e].previous,this.renderedStyles[e].current,this.renderedStyles[e].ease);this.layout()}layout(){this.DOM.image.style.transform=`translate3d(0,${this.renderedStyles.innerTranslationY.previous}px,0)`,this.DOM.imageWrapper.style.transform=`rotate3d(1,${this.ry},${this.rz},${this.renderedStyles.itemRotation.previous}deg)`}}class l{constructor(){this.DOM={main:document.querySelector("main")},this.DOM.scrollable=this.DOM.main.querySelector("div[data-scroll]"),this.items=[],this.DOM.content=this.DOM.main.querySelector(".content"),[...this.DOM.content.querySelectorAll(".content__item")].forEach(e=>this.items.push(new o(e))),this.renderedStyles={translationY:{previous:0,current:0,ease:.1,setValue:()=>t}},this.setSize(),this.update(),this.style(),this.initEvents(),requestAnimationFrame(()=>this.render())}update(){for(let e in this.renderedStyles)this.renderedStyles[e].current=this.renderedStyles[e].previous=this.renderedStyles[e].setValue();this.layout()}layout(){this.DOM.scrollable.style.transform=`translate3d(0,${-1*this.renderedStyles.translationY.previous}px,0)`}setSize(){i.style.height=`${this.DOM.scrollable.scrollHeight}px`}style(){this.DOM.main.style.position="fixed",this.DOM.main.style.width=this.DOM.main.style.height="100%",this.DOM.main.style.top=this.DOM.main.style.left=0,this.DOM.main.style.overflow="hidden"}initEvents(){window.addEventListener("resize",()=>this.setSize())}render(){for(let e in this.renderedStyles)this.renderedStyles[e].current=this.renderedStyles[e].setValue(),this.renderedStyles[e].previous=s.lerp(this.renderedStyles[e].previous,this.renderedStyles[e].current,this.renderedStyles[e].ease);for(let e of(this.layout(),this.items))e.isVisible?e.insideViewport?e.render():(e.insideViewport=!0,e.update()):e.insideViewport=!1;requestAnimationFrame(()=>this.render())}}new Promise((e,t)=>{imagesLoaded(document.querySelectorAll(".content__item-img"),{background:!0},e)}).then(()=>{document.body.classList.remove("loading"),n(),new l})}document.querySelector("#refresh").addEventListener("click",function(){var e=document.querySelector("#app"),t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)});